- checkout
    # build folder that needs to be deployed
    - restore_cache:
      key: v1-dist-{{ .Environment.CIRCLE_BRANCH }}-{{.Environment.CIRCLE_SHA1 }}

    # Add the dist folder in github repo
    - run:
       name: Commit folder
       command: |
          git config credential.helper 'cache --timeout=120'
          git config --global user.email "rutulpatel7077@gmail.com"
          git config --global user.name "Rutul Patel"
          git add .
          git commit -m "added dist folder from cache for the deployment"

    # Install AWS cli
     - run:
         name: Install aws cli and python-pip
         working_directory: /
         command: |
            sudo apt-get -y -qq update
            sudo apt-get install python-pip python-dev build-essential
            sudo pip install awsebcli --upgrade
    # Deploy to the ElasticBeasTalk corresponding to the current branch
            - run:
                name: Deploy on AWS EB
                command: |
                        eb deploy --timeout 60
